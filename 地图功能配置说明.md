# 地图功能配置说明

## 高德地图API密钥配置

### 1. 获取高德地图API密钥

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册账号并登录
3. 进入控制台，创建新应用
4. 为应用添加"Web服务"类型的Key
5. 复制生成的API密钥

### 2. 配置API密钥

#### 方法一：环境变量配置（推荐）

创建 `.env` 文件（复制 `.env.example`）：

```bash
# 高德地图API密钥
AMAP_API_KEY=您的高德地图API密钥

# 旅游数据配置（可选，默认使用真实API数据）
TOURISM_USE_MOCK=False  # 设置为True使用模拟数据，False使用真实API数据
```

#### 方法二：直接修改代码

在 `src/my_app/app.py` 中修改默认密钥：

```python
amap_api_key = os.getenv('AMAP_API_KEY', '您的高德地图API密钥')
```

## 数据源配置

### 使用真实API数据（推荐）

默认配置下，系统会使用真实的API数据源。确保：

1. 设置 `TOURISM_USE_MOCK=False`（默认）
2. 配置相关的API密钥和服务
3. 网络连接正常

### 使用模拟数据（测试用）

如需使用模拟数据进行测试：

```bash
# 在 .env 文件中设置
TOURISM_USE_MOCK=True
```

## 验证配置

1. 启动应用：`python main.py`
2. 访问：http://localhost:5000/travel_plan
3. 输入城市名称（如：北京、上海、杭州）
4. 生成旅行计划后查看地图功能

## 注意事项

1. **API密钥安全**：不要将真实密钥提交到代码仓库
2. **配额限制**：免费版高德地图API有调用次数限制
3. **网络要求**：地图功能需要网络连接
4. **浏览器兼容性**：支持现代浏览器

## 故障排除

### 地图不显示
- 检查API密钥是否正确配置
- 查看浏览器控制台错误信息
- 确认网络连接正常

### 景点无坐标数据
- 检查是否使用了真实API数据
- 确认数据源返回了经纬度信息
- 查看后端日志获取详细信息

### 配置无效
- 重启应用使配置生效
- 检查环境变量是否正确加载
- 确认配置文件格式正确